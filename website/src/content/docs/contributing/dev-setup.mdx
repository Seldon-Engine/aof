---
title: Dev Setup
description: Set up your AOF development environment.
sidebar:
  order: 1
---

import { Steps, Aside } from '@astrojs/starlight/components';

## Prerequisites

- **Node.js 22+** (AOF uses native ES modules; 22 is the minimum)
- **npm 9+**
- **Git**

## Setup

<Steps>

1. **Clone the repository**

   ```bash
   git clone https://github.com/Seldon-Engine/aof.git
   cd aof
   ```

2. **Install dependencies**

   ```bash
   npm install
   ```

3. **Build**

   ```bash
   npm run build
   ```

4. **Verify your setup**

   ```bash
   npm test
   ```

   All tests should pass. If any fail on a clean clone, please [open an issue](https://github.com/Seldon-Engine/aof/issues).

</Steps>

## Fast Development Loop

```bash
# Run targeted tests for a module (fastest feedback)
npx vitest run src/dispatch

# Run a single test file
npx vitest run src/dispatch/__tests__/gate-evaluator.test.ts

# Watch mode during active development
npx vitest src/dispatch --watch

# Full test suite
npm test

# TypeScript type check without building
npx tsc --noEmit
```

## Project Structure

```
aof/
├── src/                    TypeScript source
│   ├── cli/                CLI commands (Commander.js)
│   ├── daemon/             Background service
│   ├── dispatch/           Scheduler, gate evaluator, SLA, lease manager
│   ├── store/              Filesystem task store
│   ├── protocol/           Inter-agent protocol router
│   ├── events/             Event logger + notification engine
│   ├── memory/             Medallion pipeline + HNSW vector index
│   ├── metrics/            Prometheus exporter
│   ├── mcp/                MCP server adapter
│   ├── org/                Org-chart parser and validator
│   ├── schemas/            Zod schemas (source of truth)
│   ├── tools/              Agent tool implementations
│   ├── views/              Kanban and mailbox view generators
│   └── recovery/           Task resurrection and deadletter
├── tests/                  Integration + e2e tests
├── dist/                   Compiled output (generated)
├── docs/                   Internal documentation
├── scripts/                Build and deployment scripts
└── website/                Documentation portal (this site)
```

## Debugging

### Watch TypeScript compilation

```bash
npm run dev     # tsc --watch
```

### Run CLI from source (during development)

```bash
node --import tsx/esm src/cli/index.ts <command>
# Or after building:
node dist/cli/index.js <command>
```

### Enable debug logging

```bash
LOG_LEVEL=debug node dist/cli/index.js scheduler run
```

## Running Integration Tests

```bash
# Full integration suite
npm run test:integration:plugin

# E2E tests (requires running OpenClaw instance)
npm run test:e2e
```

<Aside type="note">
E2E tests require a running OpenClaw instance. They are disabled by default in CI and run manually via `workflow_dispatch`.
</Aside>

## Git Hooks

AOF uses `simple-git-hooks` for commit message validation. The hooks are installed automatically with `npm install`:

```bash
# Commit message linting (via commitlint)
# Runs on every commit
git commit -m "feat: add new feature"  # ✅
git commit -m "add new feature"         # ✗ (no conventional commits prefix)
```

See [Conventional Commits](/contributing/conventional-commits) for the full format.
