---
title: CLI Reference
description: Complete reference for all AOF CLI commands.
sidebar:
  order: 2
---

import { Aside } from '@astrojs/starlight/components';

AOF provides a full CLI for managing tasks, the daemon, org charts, and memory. All commands are available as `aof <command>`.

```bash
# Global option ‚Äî override the project root directory
aof --root /path/to/project <command>
```

<Aside type="tip">
Set `AOF_ROOT` in your environment to avoid passing `--root` on every command:
```bash
export AOF_ROOT=~/Projects/my-project
```
</Aside>

---

## init

Set up AOF's OpenClaw integration: register the plugin, sync the org chart, optionally configure memory, and install the companion skill.

```bash
aof init [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-y, --yes` | Non-interactive ‚Äî accept all defaults, skip all confirmation prompts |
| `--skip-openclaw` | Skip OpenClaw steps (plugin, org sync, memory) ‚Äî only installs the companion skill |

### Steps

The wizard runs four steps in sequence. Each step is idempotent ‚Äî it checks current state before making changes and skips silently if already configured. A failure in one step doesn't abort the others.

**Step 1: Detect OpenClaw**

Checks for `~/.openclaw/openclaw.json`. If OpenClaw isn't found (or `--skip-openclaw` is set), the wizard jumps directly to Step 4.

**Step 2: Plugin registration**

Registers AOF in your OpenClaw config via `openclaw config set`:
- Sets `plugins.entries.aof` to `{ enabled: true }`
- Adds `"aof"` to `plugins.allow`

Skipped if AOF is already registered and in the allow list.

**Step 2.5: Org chart sync**

Bidirectional sync between `org/org-chart.yaml` and OpenClaw's registered agents:
- **Import** ‚Äî adds active OpenClaw agents missing from the org chart
- **Export** ‚Äî registers org chart agents (with an `openclawAgentId`) that aren't in OpenClaw
- **Drift report** ‚Äî shows any remaining mismatches after sync

Skipped if no org chart exists at `org/org-chart.yaml` or no OpenClaw agents are detected. In interactive mode, you choose which agents to import or export. With `--yes`, all are accepted.

**Step 3: Memory configuration** *(optional, defaults to skip)*

Prompts whether to configure AOF as the OpenClaw memory provider. If confirmed:
- Sets `plugins.slots.memory` to `"aof"`
- Enables `plugins.entries.aof.config.modules.memory`
- Disables the previously active memory plugin (e.g., `memory-core`), if any

With `--yes`, this step is skipped by default (the prompt default is `No`). You must explicitly confirm in interactive mode.

**Step 4: Companion skill**

Copies the bundled AOF skill to `~/.openclaw/skills/aof/SKILL.md`. This skill gives your agents the context they need to use AOF tools effectively.

Skipped if the skill is already installed at that path.

### Summary and next steps

After all steps complete, init prints a summary and, when plugin registration or memory changes were made, reminds you to restart the gateway:

```
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìã Summary

  ‚úÖ AOF plugin registered
  ‚úÖ Added to allow list
  ‚úÖ Org chart synced with OpenClaw agents
  ‚è≠  Memory system (user declined)
  ‚úÖ Companion skill installed

üîÑ Next step: restart the OpenClaw gateway to activate changes.
   Run: openclaw gateway restart
```

### Examples

```bash
# Interactive (recommended for first setup)
aof init

# Non-interactive ‚Äî accept all defaults
aof init --yes

# Skip OpenClaw steps ‚Äî only install the companion skill
aof init --skip-openclaw
```

<Aside type="caution">
After plugin registration or memory configuration, restart the OpenClaw gateway:

```bash
openclaw gateway restart
```

Plugin and memory changes take effect only after a gateway restart.
</Aside>

---

## daemon

Manage the AOF background daemon.

```bash
aof daemon <subcommand> [options]
```

### daemon start

```bash
aof daemon start [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `--port <port>` | `18100` | HTTP health endpoint port |
| `--bind <addr>` | `127.0.0.1` | Bind address |
| `--data-dir <path>` | `~/.openclaw/aof` | Data directory |
| `--log-level <level>` | `info` | Log level (`debug`\|`info`\|`warn`\|`error`) |

### daemon stop

```bash
aof daemon stop [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `--timeout <ms>` | `5000` | Shutdown timeout in milliseconds |

### daemon status

```bash
aof daemon status
```

Shows whether the daemon is running, its PID, uptime, and last poll time.

### daemon restart

```bash
aof daemon restart
```

Stops and restarts the daemon.

---

## task

Task management commands.

```bash
aof task <subcommand> [options]
```

### task create

```bash
aof task create <title> [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `-p, --priority <priority>` | `normal` | `low`\|`normal`\|`high`\|`critical` |
| `-t, --team <team>` | ‚Äî | Owner team ID |
| `-a, --agent <agent>` | ‚Äî | Target agent ID |
| `--tags <tags>` | ‚Äî | Comma-separated tags |
| `--project <id>` | `_inbox` | Project ID |

**Example:**
```bash
aof task create "Fix scheduler memory leak" \
  --priority high \
  --agent swe-backend \
  --tags "bug,performance"
```

### task promote

Promote a task from `backlog` to `ready`:

```bash
aof task promote <taskId>
```

### task cancel

Cancel a task:

```bash
aof task cancel <taskId> [--reason "reason"]
```

### task resurrect

Resurrect a deadlettered task back to `ready`:

```bash
aof task resurrect <taskId>
```

### task dep add

Add a dependency:

```bash
aof task dep add <taskId> <blockerId>
```

### task dep remove

Remove a dependency:

```bash
aof task dep remove <taskId> <blockerId>
```

### task block

Block a task on an external dependency:

```bash
aof task block <taskId> --reason "Waiting for AWS credentials"
```

### task unblock

Unblock a task:

```bash
aof task unblock <taskId>
```

### task edit

Edit task metadata:

```bash
aof task edit <taskId> [--priority high] [--agent swe-backend]
```

### task close

Mark a task as done:

```bash
aof task close <taskId> [--summary "Completed successfully"]
```

---

## scheduler

Run the scheduler manually.

```bash
aof scheduler run [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `--active` | `false` | Active mode ‚Äî actually mutate state. Without this flag, runs in dry-run mode. |
| `--project <id>` | `_inbox` | Project to schedule for |

**Examples:**

```bash
# Dry-run ‚Äî see what would be dispatched
aof scheduler run

# Active ‚Äî actually dispatch tasks
aof scheduler run --active
```

---

## org

Org chart management commands.

```bash
aof org <subcommand> [path]
```

### org validate

Validate the org chart schema:

```bash
aof org validate [path]
# ‚úÖ Org chart valid: 5 agents, 2 teams, 4 roles
# ‚úó Error: Agent 'swe-backend' references undefined team 'engineering'
```

### org show

Display the org chart in a human-readable format:

```bash
aof org show [path]
```

### org lint

Check referential integrity (cross-references between agents, teams, roles):

```bash
aof org lint [path]
```

### org drift

Detect drift between the org chart and actually-registered OpenClaw agents:

```bash
aof org drift [path]
# ‚ö†Ô∏è  Drift detected:
#   - swe-qa defined in org chart but no active OpenClaw session found
#   - agent:main:swe-ops active in OpenClaw but not in org chart
```

---

## memory

Memory module management.

```bash
aof memory <subcommand> [options]
```

### memory generate

Generate a memory configuration file from your org chart:

```bash
aof memory generate [--org-chart path/to/org-chart.yaml]
```

### memory audit

Audit memory configuration against the org chart:

```bash
aof memory audit
```

### memory curate

Generate curation tasks for promoting warm/cold content to hot tier:

```bash
aof memory curate [--org-chart path]
```

---

## scan

List all tasks by status:

```bash
aof scan [options]
```

| Flag | Description |
|------|-------------|
| `--status <status>` | Filter by status |
| `--agent <agent>` | Filter by agent |
| `--project <id>` | Project ID |

---

## board

Display a Kanban board of all tasks:

```bash
aof board [options]
```

| Flag | Description |
|------|-------------|
| `--team <team>` | Filter by team |
| `--project <id>` | Project ID |

---

## watch

Watch a view directory for real-time updates:

```bash
aof watch <viewType>
```

| View type | Description |
|-----------|-------------|
| `kanban` | Live Kanban board |
| `mailbox` | Agent mailbox view |
| `board` | Board view |

---

## lint

Lint all task files for schema and format errors:

```bash
aof lint [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `--project <id>` | `_inbox` | Project ID |

---

## metrics

Start the Prometheus metrics server:

```bash
aof metrics serve [options]
```

| Flag | Default | Description |
|------|---------|-------------|
| `--port <port>` | `9090` | Metrics server port |

Metrics are available at `http://localhost:9090/metrics` in standard Prometheus text format.

Available metrics include:
- `aof_tasks_total` ‚Äî Task count by status and priority
- `aof_dispatch_duration_ms` ‚Äî Dispatch latency histogram
- `aof_scheduler_poll_duration_ms` ‚Äî Poll cycle duration
- `aof_lease_expirations_total` ‚Äî Lease expiration count
- `aof_gate_transitions_total` ‚Äî Gate transitions by outcome and gate

---

## project

Project management commands (multi-project support).

```bash
aof project <subcommand>
```

### project create

```bash
aof project create <id> --name "My Project"
```

### project list

```bash
aof project list
```

### project show

```bash
aof project show <id>
```
