---
title: Org Chart YAML Schema Reference
description: Complete schema reference for the AOF org chart (org/org-chart.yaml).
sidebar:
  order: 4
---

import { Aside } from '@astrojs/starlight/components';

The org chart is defined in `org/org-chart.yaml` (or the path passed to `--org-chart`). This page documents every field in the schema.

## Top-Level Structure

```yaml
schemaVersion: 1            # Required. Must be 1.
template: swe-team          # Optional. Template name for tooling.

agents: []                  # Agent definitions
teams: []                   # Team groupings (legacy; prefer orgUnits)
roles: {}                   # Role-to-agent mapping for workflow gates
routing: []                 # Tag/priority dispatch rules
memoryPools: {}             # Memory tier configuration
orgUnits: []                # Org unit tree (P1.1+)
groups: []                  # Cross-cutting groups (P1.1+)
memberships: []             # Agent-to-unit memberships (P1.1+)
relationships: []           # Agent relationships (P1.1+)
defaults: {}                # Default policies
metadata: {}                # Arbitrary key-value metadata
```

---

## Agent Fields (`agents[]`)

Each entry in `agents` defines one agent:

```yaml
agents:
  - id: swe-backend               # Required. Unique agent ID.
    name: Backend Engineer Agent  # Required. Display name.
    description: "..."            # Optional. Human-readable description.
    team: engineering             # Optional. Legacy team ID.
    reportsTo: swe-architect      # Optional. Reports-to agent ID.
    canDelegate: false            # Default: false. Can delegate tasks.
    active: true                  # Default: true. Inactive = skipped by scheduler.
    openclawAgentId: "agent:main:swe-backend"  # For drift detection.

    capabilities:
      tags: [typescript, nodejs]  # Capability tags for routing.
      concurrency: 2              # Max concurrent tasks. Default: 1.
      model: claude-opus-4        # Informational: model used.
      provider: anthropic         # Informational: provider.

    comms:
      preferred: send             # "spawn" | "send" | "cli". Default: "send".
      sessionKey: "agent:main:swe-backend"  # Required for preferred: send.
      fallbacks: [cli]            # Fallback dispatch methods.

    policies:
      tasking:
        maxConcurrent: 2
        allowSelfAssign: false
        requiresReview: true
        allowedPriorities: [normal, high, critical]
      memory:
        scope: [org/engineering, shared/docs]
        tiers: [hot, warm, cold]
        readOnly: false
      communication:
        allowedChannels: [matrix, email]
        requiresApproval: false
        restrictedAgents: []
      context:
        target: 50000             # Ideal context size (chars)
        warn: 80000
        critical: 120000
```

---

## Team Fields (`teams[]`)

```yaml
teams:
  - id: engineering               # Required. Unique team ID.
    name: Engineering             # Required. Display name.
    description: "..."            # Optional.
    lead: swe-architect           # Optional. Lead agent ID.
    orchestrator: swe-pm          # Optional. Manages task queue.
    technicalLead: swe-architect  # Optional. Technical advisor.

    dispatch:                     # Optional. Per-team throttling.
      maxConcurrent: 5            # Overrides global maxConcurrentDispatches.
      minIntervalMs: 500          # Min ms between dispatches for this team.

    murmur:                       # Optional. Orchestration review triggers.
      triggers:
        - kind: queueEmpty
        - kind: completionBatch
          threshold: 10
        - kind: interval
          intervalMs: 3600000
        - kind: failureBatch
          threshold: 3
      context:
        - vision
        - roadmap
        - taskSummary
```

**`murmur.triggers` kinds:**

| Kind | Description |
|------|-------------|
| `queueEmpty` | Trigger when the team's task queue drains |
| `completionBatch` | Trigger every N completions (`threshold` required) |
| `failureBatch` | Trigger every N failures (`threshold` required) |
| `interval` | Trigger every N milliseconds (`intervalMs` required) |

---

## Role Fields (`roles{}`)

Roles map abstract gate requirements to concrete agents:

```yaml
roles:
  developer:                      # Role ID (referenced in workflow gates)
    agents:                       # Required. At least one agent.
      - swe-backend
      - swe-frontend
    description: "Implements features and fixes"
    requireHuman: false           # Default: false. true = human-only gate.

  reviewer:
    agents:
      - swe-architect
    description: "Reviews code quality and architecture"

  po:
    agents:
      - product-owner
    requireHuman: true            # Only a human agent can complete this gate
```

---

## Routing Rules (`routing[]`)

Rules for routing tasks that don't have explicit agent/role set:

```yaml
routing:
  - matchTags: [bug, hotfix]      # Match tasks with ANY of these tags.
    matchPriority: [critical]     # Match tasks with ANY of these priorities.
    targetRole: swe-backend       # Route to this role.
    targetTeam: engineering       # Or this team.
    targetAgent: swe-backend      # Or this specific agent.
    weight: 10                    # Lower = evaluated first. Default: 100.
```

Multiple rules are evaluated in order of `weight` (ascending). First matching rule wins.

---

## Memory Pools (`memoryPools`)

```yaml
memoryPools:
  hot:                            # Hot tier (always indexed).
    path: memory/hot              # Required. Directory path.
    description: "..."            # Optional.
    agents: []                    # Optional. Empty = all agents.

  warm:                           # Warm tier (role-scoped).
    - id: engineering             # Required. Unique pool ID.
      path: memory/warm/engineering
      description: "..."
      roles:                      # Required. At least one role.
        - developer
        - reviewer

  cold:                           # Cold tier (never indexed).
    - memory/cold/archive         # Array of directory paths.

  adapter: filesystem             # "filesystem" | "lancedb". Default: filesystem.
```

---

## Org Units (`orgUnits[]`) — P1.1+

Hierarchical organizational structure:

```yaml
orgUnits:
  - id: engineering               # Required. Unique ID.
    type: department              # Required. "department" | "team" | "squad" | etc.
    name: Engineering             # Required.
    description: "..."
    parentId: product             # Optional. Parent org unit for tree structure.
    leadId: swe-architect         # Optional. Lead agent.
    active: true                  # Default: true.
    metadata: {}                  # Optional arbitrary metadata.
```

---

## Memberships (`memberships[]`) — P1.1+

Agent membership in org units:

```yaml
memberships:
  - agentId: swe-backend          # Required.
    orgUnitId: engineering        # Required.
    role: engineer                # Optional. Role within the unit.
    primary: true                 # Default: true. Primary membership.
```

---

## Relationships (`relationships[]`) — P1.1+

Explicit agent-to-agent relationships:

```yaml
relationships:
  - fromAgentId: swe-backend      # Required.
    toAgentId: swe-architect      # Required.
    type: escalates_to            # Required. See types below.
    active: true                  # Default: true.
    metadata: {}
```

**Relationship types:**

| Type | Description |
|------|-------------|
| `escalates_to` | Agent escalates blockers to target |
| `delegates_to` | Agent can delegate tasks to target |
| `consults_with` | Agent seeks input from target |
| `reports_to` | Organizational hierarchy |

---

## Defaults (`defaults`)

Default policies applied to all agents (can be overridden per-agent):

```yaml
defaults:
  policies:
    tasking:
      maxConcurrent: 1
      allowSelfAssign: false
      requiresReview: false
    memory:
      tiers: [hot, warm]
      readOnly: false
    context:
      target: 50000
      warn: 80000
      critical: 120000
  capabilities:
    concurrency: 1
```

---

## Memory Curation (`memoryCuration`)

```yaml
memoryCuration:
  policyPath: org/curation-policy.yaml  # Required. Path to curation policy file.
  role: curator                          # Required. Role responsible for curation.
```

---

## Validation

```bash
# Validate schema
aof org validate

# Check referential integrity
aof org lint

# Detect drift vs active agents
aof org drift
```

The linter checks:
- All `roles` reference existing agent IDs
- All `teams` reference existing agent IDs
- All `team.orchestrator` / `team.technicalLead` reference existing agents
- All `routing` rules reference valid roles/teams/agents
- No circular dependencies in `orgUnits`
- All `memberships` reference valid agents and org units
